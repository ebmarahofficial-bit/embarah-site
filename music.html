<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ebmarah â€“ Music</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="assets/favicon.png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap');
    :root { --neon:#00ff99; --bg:#020d07; --ink:#e0ffe8; --glass:rgba(2,13,7,.75); }

    *{box-sizing:border-box;}
    html,body{height:100%; margin:0;}
    body{
      font-family:'Orbitron',sans-serif;
      color:var(--ink);
      background:var(--bg);
      overflow-x:hidden;
    }

    /* ===== Video Background ===== */
    .video-bg{position:fixed; inset:0; z-index:-3; overflow:hidden;}
    .video-bg video{width:100%; height:100%; object-fit:cover; object-position:center;}

    /* ===== Header ===== */
    header{
      position:fixed; inset:0 0 auto 0;
      display:flex; justify-content:space-between; align-items:center;
      padding:12px 18px;
      background:var(--glass);
      border-bottom:1px solid rgba(0,255,128,.2);
      box-shadow:0 6px 24px rgba(0,0,0,.35);
      z-index:1000;
      backdrop-filter: blur(10px);
    }
    .brand{display:flex; gap:10px; align-items:center; font-weight:800; letter-spacing:.02em;}
    .brand img{height:40px; width:auto;}
    .brand span{font-size:clamp(16px,2.6vw,22px)}

    /* Desktop nav */
    nav.site-nav{display:flex; align-items:center; gap:22px;}
    nav.site-nav a{color:#76ffb2; text-decoration:none; font-weight:700; font-size:clamp(13px,1.6vw,14px);}
    nav.site-nav a:hover{color:#00ffea;}

    /* Mobile trigger */
    .menu-btn{
      display:none; background:none; border:1px solid rgba(0,255,128,.35);
      color:#b9ffdf; font-size:16px; font-weight:700; padding:8px 12px; border-radius:10px
    }

    /* ===== Drawer (mobile) ===== */
    .drawer-overlay{position:fixed; inset:0; background:rgba(0,0,0,.5); z-index:999; opacity:0; pointer-events:none; transition:.25s;}
    .drawer{
      position:fixed; top:0; right:-320px; width:min(80vw,320px); height:100%;
      background:#03140c; border-left:1px solid rgba(0,255,128,.25);
      box-shadow:-12px 0 40px rgba(0,0,0,.45); z-index:1000;
      transition:right .25s ease;
      display:flex; flex-direction:column; padding:18px;
    }
    .drawer header{all:unset; display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;}
    .drawer h2{margin:0; font-size:18px; color:#9dffd2;}
    .drawer .close{
      background:none; border:1px solid rgba(0,255,128,.35); color:#b9ffdf; padding:6px 10px; border-radius:10px
    }
    .drawer nav{display:flex; flex-direction:column; margin-top:12px}
    .drawer nav a{
      padding:14px 10px; border-bottom:1px solid rgba(0,255,128,.15);
      color:#b9ffdf; text-decoration:none; font-weight:800; letter-spacing:.02em; font-size:16px;
    }
    .drawer nav a:last-child{border-bottom:0;}
    .drawer nav a:active{background:rgba(0,255,128,.08)}
    .drawer-open .drawer{right:0;}
    .drawer-open .drawer-overlay{opacity:1; pointer-events:auto;}

    /* ===== Page spacer ===== */
    .spacer{height:70px;}

    /* ===== Hidden SoundCloud iframe (driver) ===== */
    .sc-driver{
      position:absolute; width:1px; height:1px; opacity:0; pointer-events:none; left:-9999px; top:auto; border:0;
    }

    /* ===== Minimal bottom-center player ===== */
    .mini-player{
      position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
      z-index:1100;
      display:flex; align-items:center; gap:12px;
      padding:8px 12px;
      border:1px solid rgba(0,255,128,.35);
      border-radius:12px;
      background:rgba(0,0,0,.30); /* transparent look so BG stays visible */
      box-shadow:0 8px 24px rgba(0,0,0,.35);
      backdrop-filter:saturate(110%) blur(2px);
    }
    .mini-player button{
      border:1px solid rgba(0,255,128,.45);
      background:transparent;
      color:#b9ffdf;
      font-weight:800;
      padding:6px 10px;
      border-radius:10px;
      cursor:pointer;
    }
    .mini-player button:hover{ color:#00ffea; border-color:#00ffea; }
    .mini-player .title{
      max-width:min(56vw,560px);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      font-size:12px; letter-spacing:.02em; color:#76ffb2;
    }
    .mini-player .dot{
      width:6px; height:6px; border-radius:50%; margin-left:4px;
      background:#ff5c5c; box-shadow:0 0 8px #ff5c5c; display:inline-block;
    }
    .mini-player.playing .dot{
      background:#00ffa0; box-shadow:0 0 8px #00ffa0;
    }
    @media(max-width:520px){
      .mini-player .title{ max-width:60vw; }
    }
  </style>
</head>
<body>

  <!-- Background video -->
  <div class="video-bg" aria-hidden="true">
    <video autoplay loop muted playsinline preload="auto">
      <source src="video/bg2.mp4" type="video/mp4" />
    </video>
  </div>

  <!-- Header -->
  <header>
    <div class="brand">
      <img src="assets/favicon.png" alt="Ebmarah">
      <span>Ebmarah</span>
    </div>

    <!-- Desktop nav -->
    <nav class="site-nav">
      <a href="index.html">Home</a>
      <a href="music.html">Music</a>
      <a class="nav-link" href="live.html">Live</a>
      <a href="sample-packs.html">Sample Packs</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>

    <!-- Mobile trigger -->
    <button class="menu-btn" id="menuBtn" aria-haspopup="true" aria-expanded="false" aria-controls="drawer">Menu</button>
  </header>

  <!-- Drawer menu -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
  <aside class="drawer" id="drawer" role="dialog" aria-modal="true" aria-label="Site menu">
    <header>
      <h2>Menu</h2>
      <button class="close" id="drawerClose">Close</button>
    </header>
    <nav>
      <a href="index.html">Home</a>
      <a href="music.html">Music</a>
      <a class="nav-link" href="live.html">Live</a>
      <a href="sample-packs.html">Sample Packs</a>
      <a href="about.html">About</a>
      <a href="contact.html">Contact</a>
    </nav>
  </aside>

  <div class="spacer"></div>

  <!-- Hidden SoundCloud driver iframe (no visual UI) -->
  <iframe
    class="sc-driver"
    allow="autoplay"
    src="https://w.soundcloud.com/player/?url=https%3A//soundcloud.com/ebmarah&visual=false&show_artwork=false&show_user=false&show_comments=false&sharing=false&buying=false&download=false&liking=false&auto_play=false&hide_related=true&single_active=true&color=%2300ff99&theme_color=transparent"
    title="Ebmarah on SoundCloud (driver)"
  ></iframe>

  <!-- Minimal bottom-center controls -->
  <div class="mini-player" id="miniPlayer" aria-live="polite">
    <button id="scToggle" aria-label="Play/Pause">Play</button>
    <span class="title" id="scTitle">Loadingâ€¦</span>
    <span class="dot" aria-hidden="true"></span>
  </div>

  <!-- Mascot -->
  <script src="js/ebmarah-mascot.js"></script>
  <script>
    EbmarahMascot.init({
      mode:'passive',
      position:'bottom-right',
      funnyLines:[
        'BASS INCOMING',
        'sub-bass handshake!',
        'gorilla certified ðŸ”Š',
        'who threw this banana?',
        'i smell a DROP...'
      ]
    });
  </script>

  <!-- SoundCloud API -->
  <script src="https://w.soundcloud.com/player/api.js"></script>

  <!-- Player wiring -->
  <script>
    (function(){
      const frame = document.querySelector('.sc-driver');
      const widget = SC.Widget(frame);
      const btn = document.getElementById('scToggle');
      const titleEl = document.getElementById('scTitle');
      const bar = document.getElementById('miniPlayer');

      let ready = false;
      let isPlaying = false;

      function updateTitle(){
        widget.getCurrentSound(function(s){
          if(s && s.title){
            titleEl.textContent = s.title;
          } else {
            titleEl.textContent = 'Ready';
          }
        });
      }

      function updateState(playing){
        isPlaying = playing;
        btn.textContent = playing ? 'Pause' : 'Play';
        bar.classList.toggle('playing', playing);
      }

      widget.bind(SC.Widget.Events.READY, function(){
        ready = true;
        btn.disabled = false;
        updateTitle();
      });

      widget.bind(SC.Widget.Events.PLAY, function(){
        updateState(true);
        updateTitle();
      });
      widget.bind(SC.Widget.Events.PAUSE, function(){
        updateState(false);
      });
      widget.bind(SC.Widget.Events.FINISH, function(){
        updateState(false);
      });

      // If track changes (e.g., userâ€™s stream/playlist advances)
      widget.bind(SC.Widget.Events.PLAY_PROGRESS, function(e){
        // Just keep title fresh occasionally
        if(e.currentPosition < 1200){ updateTitle(); }
      });

      btn.addEventListener('click', function(){
        if(!ready) return;
        if(isPlaying){ widget.pause(); } else { widget.play(); }
      });
    })();
  </script>

  <!-- Drawer logic -->
  <script>
    (function(){
      const root=document.documentElement;
      const btn=document.getElementById('menuBtn');
      const drawer=document.getElementById('drawer');
      const overlay=document.getElementById('drawerOverlay');
      const closeBtn=document.getElementById('drawerClose');
      const openDrawer=()=>{root.classList.add('drawer-open');btn.setAttribute('aria-expanded','true');drawer.querySelector('a')?.focus();}
      const closeDrawer=()=>{root.classList.remove('drawer-open');btn.setAttribute('aria-expanded','false');btn.focus();}
      btn.addEventListener('click',openDrawer);closeBtn.addEventListener('click',closeDrawer);overlay.addEventListener('click',closeDrawer);
      window.addEventListener('keydown',e=>{if(e.key==='Escape')closeDrawer();});
    })();
  </script>
</body>
</html>
