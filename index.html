<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ebmarah â€“ Digital Gorilla Forest</title>
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap');
    :root { --neon:#00ff99; --bg:#020d07; --ink:#e0ffe8; }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Orbitron',sans-serif;
      color:var(--ink);
      background:#020d07;
      overflow-x:hidden;
    }

    /* ==== Video Background ==== */
    .video-bg {
      position: fixed;
      inset: 0;
      z-index: -3; /* behind everything */
      overflow: hidden;
    }
    .video-bg video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Header */
    header{
      position:fixed; top:0; left:0; right:0;
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 24px;
      background:rgba(2,13,7,.75);
      border-bottom:1px solid rgba(0,255,128,.2);
      box-shadow:0 6px 24px rgba(0,0,0,.35);
      z-index:1000;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.02em}
    .brand img{height:40px; width:auto}
    nav{display:flex; align-items:center; gap:22px}
    nav a{color:#76ffb2; text-decoration:none; font-weight:700; font-size:clamp(12px,1.6vw,14px)}
    nav a:hover{color:#00ffea}
    .menu-btn{display:none; background:none; border:0; color:#b9ffdf; font-size:18px; font-weight:700; padding:6px 10px; border:1px solid rgba(0,255,128,.35); border-radius:8px}
    .menu{display:flex}

    /* Hero + content */
    .spacer{height:72px}
    .hero{text-align:center; padding: clamp(64px, 12vw, 128px) 16px 32px; background:linear-gradient(180deg, rgba(0,255,128,.05), transparent);}
    .hero h1{font-size:clamp(28px, 6.5vw, 64px); margin:0 0 8px; text-shadow:0 0 20px var(--neon)}
    .hero p{font-size:clamp(12px, 2.3vw, 16px); opacity:.9; margin:0}
    .soundcloud-embed{width:min(940px, 92vw); margin: 24px auto 64px; border:2px solid rgba(0,255,128,.3); border-radius:12px; overflow:hidden; box-shadow:0 0 30px rgba(0,255,128,.2); background:rgba(0,0,0,.25);}
    .soundcloud-embed iframe{display:block; width:100%; height:166px; border:0}

    /* Reveal animations */
    .page--hidden{opacity:0; filter:blur(8px); transition:opacity .6s ease, filter .6s ease}
    .intro-out{animation:fadeOut .7s ease forwards, unblur .7s ease forwards}
    @keyframes fadeOut{to{opacity:0}} @keyframes unblur{to{filter:blur(0)}}

    /* Intro video */
    #intro{position:fixed; inset:0; z-index:9999; display:flex; justify-content:center; align-items:center; background:#000; overflow:hidden;}
    #intro video{width:100%; height:100%; object-fit:cover;}
    #tapToPlay{
      position:absolute; inset:0; display:none; justify-content:center; align-items:center;
      background:rgba(0,0,0,.7); color:#00ff99; font-family:'Orbitron',sans-serif;
      font-size:20px; font-weight:700; letter-spacing:2px; cursor:pointer;
    }
  </style>
</head>
<body>

  <!-- Video Background -->
  <div class="video-bg" aria-hidden="true">
    <video id="bgVideo" autoplay loop muted playsinline>
      <source src="video/bg.mp4" type="video/mp4">
    </video>
  </div>

  <!-- Intro Video -->
  <div id="intro" aria-hidden="true">
    <video id="introVideo" src="video/intro.mp4" autoplay playsinline></video>
    <div id="tapToPlay">Tap to start intro</div>
  </div>

  <!-- Main Page -->
  <div id="page" class="page--hidden">
    <header>
      <div class="brand">
        <img src="assets/favicon.png" alt="Ebmarah">
        <span style="font-size:clamp(16px,2.6vw,22px)">Ebmarah</span>
      </div>
      <button class="menu-btn" id="menuBtn">Menu</button>
      <nav class="menu" id="menu">
        <a href="index.html">Home</a>
        <a href="music.html">Music</a>
        <a href="sample-packs.html">Sample Packs</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </header>

    <div class="spacer"></div>
    <section class="hero">
      <h1>Welcome to the Digital Gorilla Forest</h1>
      <p>Stream my latest dubstep tracks & explore the digital jungle.</p>
    </section>

    <!-- Mascot -->
    <script src="js/ebmarah-mascot.js"></script>
    <script>
      // Init mascot only after intro finishes, positioned on the LEFT
      window.addEventListener('intro-finished', () => {
        EbmarahMascot.init({
          mode:'passive',
          position:'bottom-left',
          funnyLines:['BASS INCOMING','sub-bass handshake!','gorilla certified ðŸ”Š','who threw this banana?','i smell a DROP...']
        });
      }, { once: true });
    </script>
  </div>

  <!-- Intro Script -->
  <script>
  (function(){
    const intro = document.getElementById('intro');
    const video = document.getElementById('introVideo');
    const tap   = document.getElementById('tapToPlay');
    const page  = document.getElementById('page');

    function endIntro(){
      intro.classList.add('intro-out');
      page.classList.remove('page--hidden');
      page.style.opacity='1';
      window.dispatchEvent(new Event('intro-finished'));
      setTimeout(()=> intro.style.display='none',700);
    }

    video.play().catch(()=>{ tap.style.display='flex'; });
    tap.addEventListener('click',()=>{ tap.style.display='none'; video.play(); });
    video.addEventListener('ended',endIntro,{once:true});
    intro.addEventListener('click',e=>{ if(e.target===intro) endIntro(); });

    const btn=document.getElementById('menuBtn'), menu=document.getElementById('menu');
    if(btn&&menu){ btn.addEventListener('click',()=> menu.classList.toggle('open')); }
  })();
  </script>

  <!-- Background Music -->
  <audio id="bgm" src="music/Enemy.mp3" preload="auto" loop playsinline></audio>
  <script>
  (()=>{const css=`
    .ebm-audio{position:fixed;left:50%;bottom:16px;transform:translateX(-50%);
      z-index:1100;display:flex;align-items:center;gap:10px;
      background:rgba(0,0,0,.55);border:1px solid rgba(0,255,128,.35);
      border-radius:12px;padding:8px 12px;font-family:'Orbitron',sans-serif;
      box-shadow:0 8px 24px rgba(0,0,0,.35);}
    .ebm-audio button{border:1px solid rgba(0,255,128,.45);background:transparent;
      color:#b9ffdf;font-weight:700;padding:6px 10px;border-radius:10px;cursor:pointer;}
    .ebm-audio button:hover{color:#00ffea;border-color:#00ffea}
    .ebm-audio input[type="range"]{width:140px;accent-color:#00ff99}
    .ebm-audio .status{color:#76ffb2;font-size:12px;letter-spacing:.02em;opacity:.9}
    .ebm-audio .dot{display:inline-block;width:6px;height:6px;border-radius:50%;
      background:#ff5c5c;margin-left:6px;box-shadow:0 0 8px #ff5c5c}
    .ebm-audio.playing .dot{background:#00ffa0;box-shadow:0 0 8px #00ffa0}
    @media(max-width:520px){.ebm-audio input[type="range"]{width:100px}}`;
    const s=document.createElement('style');s.textContent=css;document.head.appendChild(s);
    const wrap=document.createElement('div');wrap.className='ebm-audio';
    wrap.innerHTML=`<button id="ebmPlay" disabled>Play</button><button id="ebmMute" disabled>Mute</button>
      <input id="ebmVol" type="range" min="0" max="1" step="0.01" disabled />
      <span class="status" id="ebmStatus">waiting for intro<span class="dot"></span></span>`;
    document.body.appendChild(wrap);
    const audio=document.getElementById('bgm'),playBtn=wrap.querySelector('#ebmPlay'),
    muteBtn=wrap.querySelector('#ebmMute'),vol=wrap.querySelector('#ebmVol'),status=wrap.querySelector('#ebmStatus');
    const keyVol='ebm_enemy_vol',keyMute='ebm_enemy_mute';
    const savedVol=parseFloat(localStorage.getItem(keyVol));const savedMute=localStorage.getItem(keyMute)==='true';
    audio.volume=Number.isFinite(savedVol)?savedVol:0.4;audio.muted=savedMute;vol.value=audio.volume;
    function setControls(on){playBtn.disabled=!on;muteBtn.disabled=!on;vol.disabled=!on}
    function updateUI(){playBtn.textContent=audio.paused?'Play':'Pause';muteBtn.textContent=audio.muted?'Unmute':'Mute';
      status.textContent=audio.paused?'paused':'playing';wrap.classList.toggle('playing',!audio.paused);
      status.insertAdjacentHTML('beforeend','<span class="dot"></span>');}
    async function startBGM(){setControls(true);try{await audio.play();}catch{status.textContent='tap to play';
      status.insertAdjacentHTML('beforeend','<span class="dot"></span>');}updateUI();}
    addEventListener('intro-finished',startBGM,{once:true});
    playBtn.addEventListener('click',async()=>{if(audio.paused){await audio.play().catch(()=>{});}else audio.pause();updateUI()});
    muteBtn.addEventListener('click',()=>{audio.muted=!audio.muted;localStorage.setItem(keyMute,String(audio.muted));updateUI()});
    vol.addEventListener('input',()=>{audio.volume=Number(vol.value);localStorage.setItem(keyVol,String(audio.volume));
      if(audio.volume>0&&audio.muted){audio.muted=false;localStorage.setItem(keyMute,'false')}updateUI()});
    audio.addEventListener('play',updateUI);audio.addEventListener('pause',updateUI);audio.addEventListener('volumechange',updateUI);
  })();
  </script>
</body>
</html>
