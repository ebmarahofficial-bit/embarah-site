<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ebmarah ‚Äì Digital Gorilla Forest</title>
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap');
    :root {
      --neon: #00ff99;
      --bg: #020d07;
      --ink: #e0ffe8;
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      color: var(--ink);
      background: var(--bg);
      overflow-x: hidden;
    }

    #parallax-scene {
      position: fixed;
      inset: 0;
      perspective: 1200px;
      overflow: hidden;
      z-index: -3;
    }
    .layer {
      position: absolute;
      inset: -6%;
      will-change: transform;
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }
    .layer-deep {
      background: url("assets/bg.png") center / cover no-repeat;
      transform: translateZ(-200px) scale(1.2);
    }
    .layer-mid {
      background: url("assets/bg.png") center / cover no-repeat;
      opacity: .92;
      filter: blur(1.2px);
      transform: translateZ(-100px) scale(1.1);
    }
    .layer-stars {
      background: url('https://www.transparenttextures.com/patterns/stardust.png');
      opacity: .12;
      animation: moveStars 120s linear infinite;
    }
    .layer-mist {
      background: radial-gradient(circle, rgba(0,255,128,0.08), transparent 70%);
      mix-blend-mode: screen;
      animation: drift 60s linear infinite;
    }

    @keyframes moveStars {
      from { transform: translate(0,0); }
      to { transform: translate(-200px, -200px); }
    }
    @keyframes drift {
      from { transform: translate(-25%, -25%) scale(1); }
      to   { transform: translate(25%, 25%) scale(1.2); }
    }

    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 24px;
      background: rgba(2,13,7,0.75);
      border-bottom: 1px solid rgba(0,255,128,0.2);
      z-index: 999;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .brand img {
      height: 40px;
    }
    nav {
      display: flex;
      gap: 20px;
    }
    nav a {
      color: #76ffb2;
      text-decoration: none;
      font-weight: 700;
    }
    nav a:hover {
      color: #00ffea;
    }

    .spacer { height: 72px; }

    .hero {
      text-align: center;
      padding: 100px 20px 40px;
    }
    .hero h1 {
      font-size: clamp(28px, 6.5vw, 64px);
      text-shadow: 0 0 20px var(--neon);
    }
    .hero p {
      font-size: clamp(14px, 2vw, 18px);
      opacity: 0.9;
    }

    .volume-controls {
      position: fixed;
      bottom: 16px;
      left: 16px;
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(0,255,153,0.3);
      padding: 10px 14px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 1000;
    }
    .volume-controls input[type="range"] {
      width: 100px;
    }
    .volume-controls button {
      background: none;
      border: none;
      color: var(--ink);
      font-size: 18px;
      cursor: pointer;
    }

    #intro {
      position: fixed;
      inset: 0;
      background: #010503;
      display: grid;
      place-items: center;
      z-index: 9999;
    }
    .intro-wrap {
      text-align: center;
    }
    .logo {
      font-size: 48px;
      color: var(--neon);
      text-shadow: 0 0 12px rgba(0,255,153,0.6), 0 0 30px rgba(0,255,153,0.25);
    }
    .terminal {
      font-family: monospace;
      margin: 20px auto;
      color: var(--ink);
    }
    .line { margin: 6px 0; white-space: nowrap; }
    .line.hidden { visibility: hidden; }
    .caret {
      display: inline-block;
      width: 10px;
      height: 1.2em;
      border-left: 2px solid var(--neon);
      animation: blink 0.9s steps(1,end) infinite;
      margin-left: 2px;
    }
    @keyframes blink { 50% { opacity: 0; } }
    .tap-hint {
      margin-top: 14px;
      font-size: 14px;
      opacity: 0.85;
    }

    .page--hidden {
      opacity: 0;
      filter: blur(6px);
      transition: all 0.6s ease;
    }
    .intro-out {
      animation: fadeOut 0.7s ease forwards, unblur 0.7s ease forwards;
    }
    @keyframes fadeOut { to { opacity: 0; } }
    @keyframes unblur { to { filter: blur(0); } }
  </style>
</head>
<body>

  <!-- Parallax Background -->
  <div id="parallax-scene">
    <div class="layer layer-deep"></div>
    <div class="layer layer-mid"></div>
    <div class="layer layer-stars"></div>
    <div class="layer layer-mist"></div>
  </div>

  <!-- Intro Screen -->
  <div id="intro">
    <div class="intro-wrap">
      <div class="logo">EBMARAH</div>
      <div class="terminal">
        <div class="line"><span class="caret"></span></div>
        <div class="line hidden" data-text="booting sequence..."></div>
        <div class="line hidden" data-text="authenticating user: guest"></div>
        <div class="line hidden" data-text="loading: enemy.mp3"></div>
        <div class="line hidden" data-text="launching Digital Jungle..."></div>
      </div>
      <div class="tap-hint" id="tapHint">Tap to start audio<br><button id="tapBtn">‚ñ∂Ô∏è Start</button></div>
    </div>
    <audio id="introAudio" src="assets/intro.mp3" preload="auto" playsinline></audio>
  </div>

  <!-- Main Content -->
  <div id="page" class="page--hidden">
    <header>
      <div class="brand"><img src="assets/favicon.png"><span>Ebmarah</span></div>
      <nav>
        <a href="index.html">Home</a>
        <a href="music.html">Music</a>
        <a href="sample-packs.html">Sample Packs</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </nav>
    </header>

    <div class="spacer"></div>

    <section class="hero">
      <h1>Welcome to the Digital Gorilla Forest</h1>
      <p>Stream my latest dubstep tracks & explore the digital jungle.</p>
    </section>

    <!-- Audio Player -->
    <audio id="bgMusic" src="music/enemy.mp3" preload="auto" loop></audio>
    <div class="volume-controls" id="volumeBox" style="display:none">
      <button id="muteBtn">üîä</button>
      <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
    </div>
  </div>

  <!-- Scripts -->
  <script>
    const intro = document.getElementById('intro');
    const page = document.getElementById('page');
    const audio = document.getElementById('introAudio');
    const bgMusic = document.getElementById('bgMusic');
    const lines = [...intro.querySelectorAll('.line')];
    const tapHint = document.getElementById('tapHint');
    const tapBtn = document.getElementById('tapBtn');
    const muteBtn = document.getElementById('muteBtn');
    const volumeSlider = document.getElementById('volumeSlider');
    const volumeBox = document.getElementById('volumeBox');
    let started = false;

    const type = (el, txt, speed = 20) => new Promise(res => {
      let i = 0;
      el.textContent = '';
      el.style.visibility = 'visible';
      (function tick() {
        if (i < txt.length) {
          el.textContent += txt[i++];
          setTimeout(tick, speed);
        } else res();
      })();
    });

    async function showBootText() {
      const first = lines[0];
      const caret = first.querySelector('.caret'); if (caret) caret.remove();
      await type(first, '>> INIT EBS LOADER');
      for (let i = 1; i < lines.length; i++) {
        await type(lines[i], lines[i].dataset.text);
      }
    }

    function unlock() {
      intro.classList.add('intro-out');
      page.classList.remove('page--hidden');
      page.style.opacity = '1';
      volumeBox.style.display = 'flex';
      setTimeout(() => intro.style.display = 'none', 700);
      bgMusic.play().catch(() => {});
    }

    async function startAudio() {
      if (started) return;
      started = true;
      tapHint.style.display = 'none';
      await showBootText();
      try {
        await audio.play();
        audio.addEventListener('ended', unlock, { once: true });
      } catch (err) {
        unlock();
      }
    }

    // Volume + mute
    muteBtn.addEventListener('click', () => {
      bgMusic.muted = !bgMusic.muted;
      muteBtn.textContent = bgMusic.muted ? 'üîá' : 'üîä';
    });
    volumeSlider.addEventListener('input', e => {
      bgMusic.volume = parseFloat(e.target.value);
      if (bgMusic.volume === 0) {
        bgMusic.muted = true;
        muteBtn.textContent = 'üîá';
      } else {
        bgMusic.muted = false;
        muteBtn.textContent = 'üîä';
      }
    });

    tapBtn.addEventListener('click', startAudio);
    intro.addEventListener('pointerdown', e => {
      if (!started && (e.target === intro || e.target.closest('#tapHint'))) startAudio();
    });

    // Parallax mouse tracking
    const deep = document.querySelector('.layer-deep');
    const mid = document.querySelector('.layer-mid');
    const stars = document.querySelector('.layer-stars');
    const mist = document.querySelector('.layer-mist');
    let mx = 0, my = 0, tx = 0, ty = 0;
    window.addEventListener('mousemove', e => {
      mx = (e.clientX / window.innerWidth - 0.5) * 2;
      my = (e.clientY / window.innerHeight - 0.5) * 2;
    });
    function animate() {
      tx += (mx - tx) * 0.05;
      ty += (my - ty) * 0.05;
      const dx = tx * 12, dy = ty * 8;
      deep.style.transform = `translateZ(-200px) translate(${dx}px, ${dy}px) scale(1.2)`;
      mid.style.transform  = `translateZ(-100px) translate(${dx*1.5}px, ${dy*1.5}px) scale(1.1)`;
      stars.style.transform= `translateZ(-60px)  translate(${dx*2}px, ${dy*2}px)`;
      mist.style.transform = `translateZ(0px)    translate(${dx*2.5}px, ${dy*2.5}px)`;
      requestAnimationFrame(animate);
    }
    animate();
  </script>
</body>
</html>

